{{> layout/header}}
<div class="container p-5 admin-container">
    <div class="card border-0">
        <div class="card-header">
            <h4 class="mb-0"><b>환불 요청 관리</b></h4>
        </div>
        <div class="card-body table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="text-center">No</th>
                        <th class="text-center">사용자(Email)</th>
                        <th class="text-center">결제번호</th>
                        <th class="text-center">환불 요청 금액</th>
                        <th class="text-center">요청일시</th>
                        <th class="text-center">상태</th>
                        <th class="text-center">관리</th>
                    </tr>
                </thead>
                <tbody>
                {{#refundList}}
                    <tr>
                        <td class="text-center">{{id}}</td>
                        <td class="text-center">{{username}}</td>
                        <td class="text-center">{{paymentId}}</td>
                        <td class="text-center">{{amount}} P</td>
                        <td class="text-center">{{requestedAt}}</td>
                        <td class="text-center">{{statusDisplay}}</td>
                        <td>
                            <button class="btn btn-outline-secondary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#myModal"
                            onclick="openRefundModal('{{id}}', '{{username}}', '{{reason}}', {{amount}}, '{{statusDisplay}}')">
                                상세
                            </button>
                        </td>
                    </tr>
                {{/refundList}}
                </tbody>
            </table>
        </div>

        <div class="modal fade" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <h4 class="modal-title">환불 요청 상세</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body">
                        <input type="hidden" id="modalRefundId" value="">
                       <div class="mb-3">
                           <label class="form-label text-muted small">신청자</label>
                           <div class="form-control-plaintext fw-bold" id="modalUsername"></div>
                       </div>
                        <div class="mb-3">
                            <label class="form-label text-muted small">환불 요청 금액</label>
                            <div class="form-control-plaintext fw-bold text-danger" id="modalAmount"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-muted small">환불 사유</label>
                            <div class="form-control-plaintext fw-normal rounded-2 p-2 refund-reason-box" id="modalReason"></div>
                        </div>

                        <div class="mb-3" id="rejectReasonDiv">
                            <label class="form-label text-muted small">관리자 거절 사유</label>
                            <textarea class="form-control" name="" id="rejectReasonInput" rows="2" placeholder="거절 사유 반드시 입력"></textarea>
                        </div>
                    </div>

                    <div class="modal-footer" id="modalFooter">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/admin/modal.js"></script>
{{> layout/footer}}